# ููุฎุต ุณุฑูุน - ููุฒุฉ ุชุญููู PDF

## ๐ฏ ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ
ุฅุถุงูุฉ ุฅููุงููุฉ ุชุญููู ุงููุตุฉ ูููู PDF ูู ููุงูุฉ ุงููุตุฉ ุงูุชูุงุนููุฉ.

## ๐ง ุงูููููุงุช ุงููุถุงูุฉ

### 1. ุฒุฑ ุชุญููู PDF ูู ุงูุจูุจ ุฃุจ
```html
<button id="download-pdf" class="w-full flex items-center justify-center gap-2 bg-red-600 text-white rounded-lg py-2 font-semibold hover:bg-red-700 transition">
    <svg class='w-5 h-5' fill='currentColor' viewBox='0 0 24 24'>
        <path d='M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13v6l-6 6v-4.5l-4.5 4.5h-9v-12h19.5z'/>
    </svg>ุชุญููู ุงููุตุฉ ูู PDF
</button>
```

### 2. ูุนุงูุฌ ุฃุญุฏุงุซ ุฒุฑ ุงูุชุญููู
```javascript
downloadPdfBtn && downloadPdfBtn.addEventListener('click', async () => {
    try {
        // ุชุบููุฑ ุญุงูุฉ ุงูุฒุฑ ุฃุซูุงุก ุงูุชุญููู
        downloadPdfBtn.innerHTML = '<svg class="animate-spin w-5 h-5">...</svg> ุฌุงุฑู ุงูุชุญููู...';
        downloadPdfBtn.disabled = true;
        
        // ุฌูุน ุจูุงูุงุช ุงููุตุฉ ููู PDF
        const storyPages = [];
        const storySteps = this.storySteps.filter(step => !/^\(ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู:/.test(step.trim()));
        
        for (let i = 0; i < storySteps.length; i++) {
            const storyText = storySteps[i];
            const imageContainer = document.querySelector(`.story-image-container-${i}`);
            let imageUrl = '';
            
            if (imageContainer) {
                const img = imageContainer.querySelector('img');
                if (img) {
                    imageUrl = img.src;
                }
            }
            
            storyPages.push({
                text: storyText,
                imageUrl: imageUrl
            });
        }
        
        // ุชุญููู PDF
        await downloadStoryAsPDF(storyPages, this.heroName);
        
        // ุฑุณุงูุฉ ูุฌุงุญ
        downloadPdfBtn.innerHTML = 'ุชู ุงูุชุญููู!';
        setTimeout(() => {
            downloadPdfBtn.innerHTML = 'ุชุญููู ุงููุตุฉ ูู PDF';
            downloadPdfBtn.disabled = false;
        }, 2000);
        
    } catch (error) {
        // ุฑุณุงูุฉ ุฎุทุฃ
        downloadPdfBtn.innerHTML = 'ุฎุทุฃ ูู ุงูุชุญููู';
        setTimeout(() => {
            downloadPdfBtn.innerHTML = 'ุชุญููู ุงููุตุฉ ูู PDF';
            downloadPdfBtn.disabled = false;
        }, 3000);
    }
});
```

### 3. ุฏุงูุฉ ุชุญููู PDF ุงููุญุณูุฉ
```javascript
async function downloadStoryAsPDF(storyPages, heroName) {
    if (!window.jspdf || !window.jspdf.jsPDF) {
        alert("ููุชุจุฉ jsPDF ูู ุชูุญููู ุจุดูู ุตุญูุญ. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ ุฃู ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช.");
        return;
    }
    
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
    
    // ุฅุถุงูุฉ ุตูุญุฉ ุงูุนููุงู
    pdf.setFillColor(102, 126, 234); // ููู ุงูุจููุณุฌู
    pdf.rect(0, 0, 210, 297, 'F');
    
    pdf.setTextColor(255, 255, 255);
    pdf.setFont('helvetica', 'bold');
    pdf.setFontSize(24);
    pdf.text('๐ญ ูุตุฉ ุชูุงุนููุฉ ๐ญ', 105, 80, { align: 'center' });
    
    pdf.setFontSize(18);
    pdf.text(`ุงูุจุทู: ${heroName}`, 105, 100, { align: 'center' });
    
    pdf.setFontSize(14);
    pdf.text('ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุชุทุจูู ุงููุตุต ุงูุชูุงุนููุฉ', 105, 120, { align: 'center' });
    
    pdf.addPage();
    
    // ุฅุถุงูุฉ ูุญุชูู ุงููุตุฉ
    for (let i = 0; i < storyPages.length; i++) {
        const { text, imageUrl } = storyPages[i];
        
        // ุฅุถุงูุฉ ุนููุงู ุงููุดูุฏ
        pdf.setFillColor(147, 51, 234); // ููู ุงูุจููุณุฌู ุงููุงุชุญ
        pdf.rect(0, 0, 210, 20, 'F');
        
        pdf.setTextColor(255, 255, 255);
        pdf.setFont('helvetica', 'bold');
        pdf.setFontSize(16);
        pdf.text(`ุงููุดูุฏ ${i + 1}`, 105, 12, { align: 'center' });
        
        // ุชุญููู ุงูุตูุฑุฉ ูุชุญููููุง ุฅูู DataURL
        let imgData = '';
        try {
            if (imageUrl) {
                imgData = await toDataURL(imageUrl);
            }
        } catch (e) { 
            console.error('Error loading image:', e);
            imgData = ''; 
        }
        
        // ุฅุถุงูุฉ ุงูุตูุฑุฉ
        if (imgData) {
            pdf.addImage(imgData, 'JPEG', 15, 30, 180, 120);
            // ุฅุถุงูุฉ ุงููุต ุฃุณูู ุงูุตูุฑุฉ
            pdf.setTextColor(0, 0, 0);
            pdf.setFont('helvetica', 'normal');
            pdf.setFontSize(12);
            pdf.text(text, 15, 160, { maxWidth: 180, align: 'right' });
        } else {
            // ุฅุฐุง ูู ุชูุฌุฏ ุตูุฑุฉุ ุฃุถู ุงููุต ููุท
            pdf.setTextColor(0, 0, 0);
            pdf.setFont('helvetica', 'normal');
            pdf.setFontSize(14);
            pdf.text(text, 15, 50, { maxWidth: 180, align: 'right' });
        }
        
        // ุฅุถุงูุฉ ุฑูู ุงูุตูุญุฉ
        pdf.setFontSize(10);
        pdf.setTextColor(128, 128, 128);
        pdf.text(`${i + 1}`, 105, 280, { align: 'center' });
        
        // ุฅุถุงูุฉ ุตูุญุฉ ุฌุฏูุฏุฉ ุฅูุง ูู ุขุฎุฑ ุตูุญุฉ
        if (i < storyPages.length - 1) {
            pdf.addPage();
        }
    }
    
    // ุฅุถุงูุฉ ุตูุญุฉ ุงูุฎุชุงู
    pdf.addPage();
    pdf.setFillColor(102, 126, 234);
    pdf.rect(0, 0, 210, 297, 'F');
    
    pdf.setTextColor(255, 255, 255);
    pdf.setFont('helvetica', 'bold');
    pdf.setFontSize(20);
    pdf.text('๐ ุงูุชูุช ุงููุตุฉ! ๐', 105, 120, { align: 'center' });
    
    pdf.setFontSize(14);
    pdf.text('ุดูุฑุงู ูู ุนูู ูุดุงุฑูุฉ ูุฐู ุงููุบุงูุฑุฉ ุงูุฑุงุฆุนุฉ', 105, 140, { align: 'center' });
    
    pdf.setFontSize(12);
    pdf.text('ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุชุทุจูู ุงููุตุต ุงูุชูุงุนููุฉ', 105, 160, { align: 'center' });
    
    // ุญูุธ ุงูููู
    const fileName = `${heroName || 'ูุตุฉ'}_${new Date().toLocaleDateString('ar-EG')}.pdf`;
    pdf.save(fileName);
}
```

### 4. ุฅุถุงูุฉ ููุชุจุฉ jsPDF
```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
```

## ๐ ุงููููุฒุงุช

### โ ุฒุฑ ุชุญููู PDF
- **ููู ุฃุญูุฑ ูููุฒ**: ูุฌุฐุจ ุงูุงูุชุจุงู
- **ุฃููููุฉ ุชุญููู ูุงุถุญุฉ**: ุณูููุฉ ุงูููู
- **ุชุฃุซูุฑุงุช hover**: ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- **ุญุงูุงุช ูุฎุชููุฉ**: ุนุงุฏูุ ุชุญูููุ ูุฌุงุญุ ุฎุทุฃ

### โ ุตูุญุฉ ุนููุงู ุฌูููุฉ
- **ุฎูููุฉ ุจููุณุฌูุฉ**: ูุชูุงุณูุฉ ูุน ุงูุชุทุจูู
- **ุนููุงู ุงููุตุฉ**: "๐ญ ูุตุฉ ุชูุงุนููุฉ ๐ญ"
- **ุงุณู ุงูุจุทู**: ูุนุฑุถ ุงุณู ุงูุจุทู ุจูุถูุญ
- **ูุนูููุงุช ุฅุถุงููุฉ**: ููุน ุงููุตุฉ ูุงูุชุงุฑูุฎ

### โ ูุญุชูู ููุธู
- **ูู ูุดูุฏ ูู ุตูุญุฉ ูููุตูุฉ**: ุชูุธูู ูุงุถุญ
- **ุนููุงู ุงููุดูุฏ**: "ุงููุดูุฏ 1ุ ุงููุดูุฏ 2ุ ุฅูุฎ"
- **ุงูุตูุฑ ูุงููุตูุต**: ุนุฑุถ ูุงูู ูููุญุชูู
- **ุฃุฑูุงู ุงูุตูุญุงุช**: ุณูููุฉ ุงูุชููู

### โ ุตูุญุฉ ุฎุชุงู
- **ุฑุณุงูุฉ ุดูุฑ**: "๐ ุงูุชูุช ุงููุตุฉ! ๐"
- **ุชุฃููุฏ ุงููุดุงุฑูุฉ**: "ุดูุฑุงู ูู ุนูู ูุดุงุฑูุฉ ูุฐู ุงููุบุงูุฑุฉ"
- **ูุนูููุงุช ุงูุชุทุจูู**: "ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุชุทุจูู ุงููุตุต ุงูุชูุงุนููุฉ"

### โ ุงุณู ููู ุฐูู
- **ุงุณู ุงูุจุทู**: ุฃุญูุฏ_2024-01-15.pdf
- **ุงูุชุงุฑูุฎ ุงูุญุงูู**: ุชููุงุฆู
- **ุตูุบุฉ ูุงุถุญุฉ**: ุณูููุฉ ุงูุชุนุฑู

## ๐ ููููุฉ ุงูุนูู

### 1. ุนูุฏ ุงูุชูุงุก ุงููุตุฉ:
```javascript
// ูุธูุฑ ุฒุฑ "ุงูุชูู" ูู ูุงูุฐุฉ ุงูุจูุจ ุฃุจ
// ุนูุฏ ุงูุถุบุท ุนูููุ ูุธูุฑ ุฒุฑ "ุชุญููู ุงููุตุฉ ูู PDF"
```

### 2. ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุชุญููู:
```javascript
// ุชุบููุฑ ุญุงูุฉ ุงูุฒุฑ ุฅูู "ุฌุงุฑู ุงูุชุญููู..."
// ุฌูุน ุฌููุน ูุดุงูุฏ ุงููุตุฉ ูุงูุตูุฑ
// ุฅูุดุงุก PDF ููุธู ูุฌููู
// ุชุญููู ุงูููู ุชููุงุฆูุงู
// ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ
```

### 3. ูููู PDF ุงููุงุชุฌ:
```
ุตูุญุฉ 1: ุตูุญุฉ ุงูุนููุงู (ุฎูููุฉ ุจููุณุฌูุฉ)
ุตูุญุฉ 2: ุงููุดูุฏ ุงูุฃูู + ุตูุฑุฉ + ูุต
ุตูุญุฉ 3: ุงููุดูุฏ ุงูุซุงูู + ุตูุฑุฉ + ูุต
ุตูุญุฉ 4: ุงููุดูุฏ ุงูุซุงูุซ + ุตูุฑุฉ + ูุต
ุตูุญุฉ 5: ุงููุดูุฏ ุงูุฑุงุจุน + ุตูุฑุฉ + ูุต
ุตูุญุฉ 6: ุตูุญุฉ ุงูุฎุชุงู (ุฑุณุงูุฉ ุดูุฑ)
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ
1. ุงูุชุญ `test-pdf-download.html`
2. ุงุถุบุท "ุงุฎุชุจุงุฑ ุฒุฑ ุงูุชุญููู"
3. ุงุถุบุท "ุงุฎุชุจุงุฑ ุฏุงูุฉ PDF"
4. ุงุถุบุท "ูุญุงูุงุฉ ูุญุชูู PDF"
5. ุงุถุบุท "ุงุฎุชุจุงุฑ ุชูููุฏ PDF"

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ
- โ ุฒุฑ ุชุญููู ูุงุถุญ ูุฌุฐุงุจ
- โ PDF ููุธู ูุฌููู
- โ ุตูุญุฉ ุนููุงู ุงุญุชุฑุงููุฉ
- โ ูุญุชูู ูุงูู ูุน ุงูุตูุฑ
- โ ุตูุญุฉ ุฎุชุงู ุฑุงุฆุนุฉ
- โ ุงุณู ููู ุฐูู ูููุธู

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ
- `test-pdf-download.html` - ุงุฎุชุจุงุฑ ุชุญููู PDF
- `PDF_DOWNLOAD_FEATURE.md` - ูุฐุง ุงูููุฎุต

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ
- `main.js`: ุฅุถุงูุฉ ุฒุฑ ุชุญููู PDF ูู ุงูุจูุจ ุฃุจ
- `main.js`: ุฅุถุงูุฉ ูุนุงูุฌ ุฃุญุฏุงุซ ููุฒุฑ
- `main.js`: ุชุญุณูู ุฏุงูุฉ `downloadStoryAsPDF`
- `index.html`: ุฅุถุงูุฉ ููุชุจุฉ jsPDF

## ๐ก ุงููููุฒุงุช ุงูุฅุถุงููุฉ
- **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ**: ุชุญููู ุณูู ูููุตุฉ
- **ูุดุงุฑูุฉ ุจุณูุทุฉ**: ูููู ูุดุงุฑูุฉ PDF ุจุณูููุฉ
- **ุญูุธ ูููุฑุงุกุฉ ูุงุญูุงู**: ุญูุธ ุงููุตุฉ ูููุฑุงุกุฉ ูู ุฃู ููุช
- **ุฅููุงููุฉ ุงูุทุจุงุนุฉ**: ุทุจุงุนุฉ ุงููุตุฉ ุจุณูููุฉ
- **ุชูุณูู ุงุญุชุฑุงูู**: PDF ููุธู ูุฌููู 