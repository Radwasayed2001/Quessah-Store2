# استراتيجية المشاهد الجديدة

## المشكلة
الصور ما زالت تظهر شخصيات مختلفة في كل مشهد رغم التحسينات السابقة.

## الحل الجديد
إظهار البطل في الصورة الأولى فقط، وباقي الصور تكون معبرة عن المشهد بدون إظهار البطل.

## الاستراتيجية المطبقة

### 1. المشهد الأول - مع البطل
```javascript
// المشهد الأول: إظهار البطل
scenePrompt = `
رسم كرتوني ملون بأسلوب مجلة أطفال/كوميكس لمشهد من قصة ${this.storyType}:
الشخصية الرئيسية ${this.heroName} تظهر بوضوح في الصورة مع ${characterDescription}
الخلفية تعكس المشهد: ${storyText}

أسلوب رسم متناسق وملون بألوان زاهية
لا تضف أي نص أو شعارات
seed للشخصية: ${characterSeed}
`;
```

### 2. باقي المشاهد - بدون البطل
```javascript
// باقي المشاهد: مشهد معبر بدون البطل
scenePrompt = `
رسم كرتوني ملون بأسلوب مجلة أطفال/كوميكس لمشهد من قصة ${this.storyType}:
مشهد معبر ومثير للخيال يعكس: ${storyText}

لا تظهر أي شخصية بشرية في الصورة
ركز على الخلفية والعناصر المحيطة
استخدم ألوان زاهية ومتناسقة
أسلوب رسم كرتوني جميل ومثير للاهتمام
لا تضف أي نص أو شعارات
`;
```

## منطق التطبيق

### تحديد نوع المشهد
```javascript
// تحديد ما إذا كان هذا المشهد الأول أم لا
const isFirstScene = this.storySteps.length === 1;

if (isFirstScene) {
    // إظهار البطل
} else {
    // مشهد معبر بدون البطل
}
```

## المميزات

### ✅ حل مشكلة تغيير الشخصية
- البطل يظهر مرة واحدة فقط
- لا توجد مشكلة تغيير الشخصية
- استمرارية واضحة في القصة

### ✅ مشاهد معبرة
- باقي المشاهد تركز على الخلفية
- مشاهد مثير للخيال
- ألوان زاهية ومتناسقة

### ✅ تجربة مستخدم محسنة
- قصة أكثر وضوحاً
- مشاهد متنوعة
- جودة أفضل في الصور

## أمثلة على المشاهد

### المشهد الأول (مع البطل)
```
"في صباحٍ هادئ، استيقظ أحمد على صوت الطيور"
→ صورة تظهر أحمد في غرفته مع الطيور
```

### المشاهد التالية (بدون البطل)
```
"في الغابة، وجد شجرة عجيبة بأوراق ملونة"
→ صورة للغابة والشجرة الملونة بدون أحمد

"داخل الكهف، سمع أصوات غريبة"
→ صورة للكهف المظلم مع الأضواء الغريبة
```

## كيفية الاختبار

1. افتح `test-scene-strategy.html`
2. اختر اسم البطل ونوع القصة
3. اضغط "اختبار المشهد الأول" لرؤية prompt البطل
4. اضغط "اختبار مشهد آخر" لرؤية prompt المشهد المعبر
5. اضغط "مقارنة المشاهد" لرؤية الفرق

## النتائج المتوقعة

- ✅ البطل يظهر في المشهد الأول فقط
- ✅ باقي المشاهد معبرة ومثيرة للخيال
- ✅ لا توجد مشكلة تغيير الشخصية
- ✅ قصة أكثر وضوحاً وجاذبية

## الملفات المحدثة

- `main.js`: تحديث منطق توليد الـ prompt
- `test-scene-strategy.html`: اختبار الاستراتيجية الجديدة
- `SCENE_STRATEGY.md`: هذا الملف

## الخطوات التالية

1. اختبار التطبيق مع أنواع مختلفة من القصص
2. جمع ملاحظات المستخدمين
3. تحسين أوصاف المشاهد المعبرة
4. إضافة المزيد من التنوع في المشاهد 