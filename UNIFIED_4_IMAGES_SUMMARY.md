# ููุฎุต ุณุฑูุน - ุงูุตูุฑ ุงูุฃุฑุจุน ุงููุชูุงุณูุฉ

## ๐ฏ ุงููุฏู
ุชูููุฏ 4 ุตูุฑ ูุชูุงุณูุฉ ุฏูุนุฉ ูุงุญุฏุฉ ูู ููุงูุฉ ุงููุตุฉุ ุจููุณ ุงูุดุฎุตูุฉ ูุงูุชุตูููุ ุจูุงุกู ุนูู ุงููุตุฉ ุงููุงููุฉ.

## ๐ง ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. ุฏุงูุฉ ุฌุฏูุฏุฉ `generateUnifiedStoryImages`
```javascript
// ุฏุงูุฉ ุฌุฏูุฏุฉ ูุชูููุฏ 4 ุตูุฑ ูุชูุงุณูุฉ ุฏูุนุฉ ูุงุญุฏุฉ
async generateUnifiedStoryImages() {
    const storySteps = this.storySteps.filter(step => !/^\(ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู:/.test(step.trim()));
    
    // ุฅูุดุงุก prompt ุดุงูู ูููุตุฉ ุงููุงููุฉ
    const fullStoryText = storySteps.join('\n\n');
    const characterDescription = this.getCharacterDescription();
    const characterSeed = this.getCharacterSeed();
    
    // ุฅูุดุงุก prompt ููุญุฏ ูุถูุงู ุงูุชูุงุณู
    const unifiedPrompt = `
ุฑุณู ูุฑุชููู ูููู ุจุฃุณููุจ ูุฌูุฉ ุฃุทูุงู/ูููููุณ ูุณูุณูุฉ ูู ุงููุดุงูุฏ ูู ูุตุฉ ${this.storyType}:
ุงููุตุฉ ุงููุงููุฉ: ${fullStoryText}

ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ ${this.heroName} ูุน ${characterDescription}
ุงุณุชุฎุฏู ููุณ ุงูุชุตููู ูุงูุฃููุงู ูู ุฌููุน ุงูุตูุฑ ูุถูุงู ุงูุชูุงุณู
seed ููุดุฎุตูุฉ: ${characterSeed}
`;
    
    // ุฅูุดุงุก prompts ููู 4 ูุดุงูุฏ
    const scenePrompts = [];
    
    for (let i = 0; i < storySteps.length; i++) {
        const storyText = storySteps[i];
        const isFirstScene = i === 0;
        
        let scenePrompt;
        if (isFirstScene) {
            // ุงููุดูุฏ ุงูุฃูู: ุฅุธูุงุฑ ุงูุจุทู
            scenePrompt = `
${unifiedPrompt}

ุงููุดูุฏ ุงูุฃูู: ${storyText}
ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ ${this.heroName} ุชุธูุฑ ุจูุถูุญ ูู ุงูุตูุฑุฉ
`;
        } else {
            // ุจุงูู ุงููุดุงูุฏ: ูุดูุฏ ูุนุจุฑ ุจุฏูู ุงูุจุทู
            scenePrompt = `
${unifiedPrompt}

ุงููุดูุฏ ${i + 1}: ${storyText}
ูุดูุฏ ูุนุจุฑ ููุซูุฑ ููุฎูุงู ุจุฏูู ุฅุธูุงุฑ ุงูุดุฎุตูุฉ
ุฑูุฒ ุนูู ุงูุฎูููุฉ ูุงูุนูุงุตุฑ ุงููุญูุทุฉ
`;
        }
        
        scenePrompts.push(scenePrompt);
    }
    
    // ุชูููุฏ ุฌููุน ุงูุตูุฑ ุฏูุนุฉ ูุงุญุฏุฉ
    const images = await Promise.all(scenePrompts.map(async (prompt, index) => {
        const img = await generateDalleImage(prompt);
        return { img, index };
    }));
}
```

### 2. ุชุญุฏูุซ ุฏุงูุฉ `completeStory`
```javascript
// ุชุญุฏูุซ ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ูู completeStory
// ุชูููุฏ 4 ุตูุฑ ูุชูุงุณูุฉ ุฏูุนุฉ ูุงุญุฏุฉ ูููุตุฉ ุงููุงููุฉ
this.generateUnifiedStoryImages();
```

## ๐ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### โ ุชูููุฏ ูุชูุงุฒู
- **4 ุตูุฑ ุฏูุนุฉ ูุงุญุฏุฉ**: ุชูููุฏ ุฌููุน ุงูุตูุฑ ูู ููุณ ุงูููุช
- **Promise.all**: ุงุณุชุฎุฏุงู JavaScript ููุชูุงุฒู
- **ูุง ููุฌุฏ ุงูุชุธุงุฑ**: ุฌููุน ุงูุตูุฑ ุชูููุฏ ูุนุงู

### โ ุชูุงุณู ูุงูู
- **Prompt ููุญุฏ**: ููุณ ุงูุชุตููู ูุงูุฃููุงู
- **Seed ุซุงุจุช**: ุถูุงู ุงุณุชูุฑุงุฑูุฉ ุงูุดุฎุตูุฉ
- **ูุตุฉ ูุงููุฉ**: ุฌููุน ุงูุตูุฑ ุชุณุชูุฏ ูููุตุฉ ุงููุงููุฉ

### โ ุฃุฏุงุก ูุญุณู
- **ุชุญููู ุฃุณุฑุน**: ูุง ุชูุชุธุฑ ุจูู ุงูุตูุฑ
- **ููุงุกุฉ ุฃุนูู**: ุงุณุชุฏุนุงุกุงุช API ูุชูุงุฒูุฉ
- **ุชุฌุฑุจุฉ ุฃูุถู**: ุนุฑุถ ุณุฑูุน ููุตูุฑ

## ๐ ููููุฉ ุงูุนูู

### 1. ุฅูุดุงุก Prompt ููุญุฏ:
```javascript
const unifiedPrompt = `
ุฑุณู ูุฑุชููู ูููู ุจุฃุณููุจ ูุฌูุฉ ุฃุทูุงู/ูููููุณ ูุณูุณูุฉ ูู ุงููุดุงูุฏ ูู ูุตุฉ ${this.storyType}:
ุงููุตุฉ ุงููุงููุฉ: ${fullStoryText}

ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ ${this.heroName} ูุน ${characterDescription}
ุงุณุชุฎุฏู ููุณ ุงูุชุตููู ูุงูุฃููุงู ูู ุฌููุน ุงูุตูุฑ ูุถูุงู ุงูุชูุงุณู
seed ููุดุฎุตูุฉ: ${characterSeed}
`;
```

### 2. ุฅูุดุงุก Prompts ูููุดุงูุฏ:
```javascript
// ุงููุดูุฏ ุงูุฃูู: ุฅุธูุงุฑ ุงูุจุทู
scenePrompt = `
${unifiedPrompt}
ุงููุดูุฏ ุงูุฃูู: ${storyText}
ุงูุดุฎุตูุฉ ุงูุฑุฆูุณูุฉ ${this.heroName} ุชุธูุฑ ุจูุถูุญ ูู ุงูุตูุฑุฉ
`;

// ุจุงูู ุงููุดุงูุฏ: ูุดูุฏ ูุนุจุฑ ุจุฏูู ุงูุจุทู
scenePrompt = `
${unifiedPrompt}
ุงููุดูุฏ ${i + 1}: ${storyText}
ูุดูุฏ ูุนุจุฑ ููุซูุฑ ููุฎูุงู ุจุฏูู ุฅุธูุงุฑ ุงูุดุฎุตูุฉ
ุฑูุฒ ุนูู ุงูุฎูููุฉ ูุงูุนูุงุตุฑ ุงููุญูุทุฉ
`;
```

### 3. ุชูููุฏ ุงูุตูุฑ ุฏูุนุฉ ูุงุญุฏุฉ:
```javascript
const images = await Promise.all(scenePrompts.map(async (prompt, index) => {
    const img = await generateDalleImage(prompt);
    return { img, index };
}));
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ
1. ุงูุชุญ `test-unified-4-images.html`
2. ุงุถุบุท "ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ ุงูุฌุฏูุฏุฉ"
3. ุงุถุบุท "ุงุฎุชุจุงุฑ ุชูููุฏ ุงูู Prompts"
4. ุงุถุบุท "ูุญุงูุงุฉ ุชูููุฏ ุงูุตูุฑ"

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ
- โ ุชูููุฏ 4 ุตูุฑ ุฏูุนุฉ ูุงุญุฏุฉ
- โ ุตูุฑ ูุชูุงุณูุฉ ุชูุงูุงู
- โ ููุณ ุงูุดุฎุตูุฉ ูู ุฌููุน ุงูุตูุฑ
- โ ุชุญููู ุฃุณุฑุน ูู ุงูุทุฑููุฉ ุงููุฏููุฉ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ
- `test-unified-4-images.html` - ุงุฎุชุจุงุฑ ุงูุตูุฑ ุงูุฃุฑุจุน ุงููุชูุงุณูุฉ
- `UNIFIED_4_IMAGES_SUMMARY.md` - ูุฐุง ุงูููุฎุต

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ
- `main.js`: ุฅุถุงูุฉ ุฏุงูุฉ `generateUnifiedStoryImages`
- `main.js`: ุชุญุฏูุซ ุฏุงูุฉ `completeStory` ูุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงูุฌุฏูุฏุฉ
- `main.js`: ุชุญุณูู ุชูููุฏ ุงูุตูุฑ ุงููุชูุงุฒู

## ๐ก ุงููููุฒุงุช ุงูุฅุถุงููุฉ
- **Prompt ุดุงูู**: ุฌููุน ุงูุตูุฑ ุชุณุชูุฏ ูููุตุฉ ุงููุงููุฉ
- **Seed ุซุงุจุช**: ุถูุงู ุงุณุชูุฑุงุฑูุฉ ุงูุดุฎุตูุฉ
- **ุชุตููู ููุญุฏ**: ููุณ ุงูุฃููุงู ูุงูุชุตููู
- **ุฃุฏุงุก ูุญุณู**: ุชูููุฏ ูุชูุงุฒู
- **ููุงุกุฉ ุฃุนูู**: ุงุณุชุฏุนุงุกุงุช API ูุชูุงุฒูุฉ 