# ููุฎุต ุณุฑูุน - ุฅุตูุงุญ ูุดุงูู PDF

## ๐จ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. ุฑููุฒ ุบุฑูุจุฉ ุจุฏูุงู ูู ุงููุตูุต ุงูุนุฑุจูุฉ
**ุงููุดููุฉ**: ุธููุฑ ุฑููุฒ ุบุฑูุจุฉ ูู PDF ุจุฏูุงู ูู ุงููุตูุต ุงูุนุฑุจูุฉ.

**ุงูุญู**:
```javascript
// ุฅุฒุงูุฉ ุงูุฎุทูุท ุงูุนุฑุจูุฉ ูุคูุชุงู:
// pdf.addFont('https://fonts.gstatic.com/s/amiri/v16/J7aRnpd8CGxBHpUrtLMA7w.ttf', 'Amiri', 'normal');
// pdf.setFont('Amiri');

// ุงุณุชุฎุฏุงู ุงูุฎุทูุท ุงูุงูุชุฑุงุถูุฉ:
pdf.setFont('helvetica');
```

### 2. ุฅุฒุงูุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ
**ุงููุดููุฉ**: ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ ุชุณุจุจ ูุดุงูู ูู ุงูุชุฑููุฒ.

**ุงูุญู**:
```javascript
// ูุจู ุงูุฅุตูุงุญ:
pdf.text('๐ญ ูุตุฉ ุชูุงุนููุฉ ๐ญ', 105, 80, { align: 'center' });

// ุจุนุฏ ุงูุฅุตูุงุญ:
pdf.text('ูุตุฉ ุชูุงุนููุฉ', 105, 80, { align: 'center' });
```

### 3. ุฅุฒุงูุฉ ุงูุตูุฑ ูุคูุชุงู
**ุงููุดููุฉ**: ุงูุตูุฑ ูุง ุชุธูุฑ ูุชุณุจุจ ูุดุงูู ูู PDF.

**ุงูุญู**:
```javascript
// ุฅุฒุงูุฉ ุงูุตูุฑ ูุคูุชุงู ููุชุฑููุฒ ุนูู ุงููุตูุต:
// if (imgData) {
//     pdf.addImage(imgData, 'JPEG', 15, 30, 180, 120);
// }

// ุฅุถุงูุฉ ุงููุต ููุท:
pdf.text(text, 15, 50, { maxWidth: 180, align: 'right' });
```

### 4. ุชุญุณูู ุฏุงูุฉ toDataURL
**ุงููุดููุฉ**: ูุดุงูู ูู ุชุญููู ูุชุญููู ุงูุตูุฑ.

**ุงูุญู**:
```javascript
async function toDataURL(url) {
    try {
        console.log('Fetching image from URL:', url);
        
        const response = await fetch(url, {
            mode: 'cors',
            headers: {
                'Accept': 'image/*'
            }
        });
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const blob = await response.blob();
        console.log('Blob size:', blob.size, 'bytes');
        
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onloadend = () => {
                console.log('Image converted to DataURL successfully');
                resolve(reader.result);
            };
            reader.onerror = (error) => {
                console.error('Error reading blob:', error);
                reject(error);
            };
            reader.readAsDataURL(blob);
        });
    } catch (error) {
        console.error('Error converting image to DataURL:', error);
        throw error;
    }
}
```

### 5. ุฅุถุงูุฉ console.log ููุชุชุจุน
**ุงููุดููุฉ**: ุตุนูุจุฉ ูู ุชุชุจุน ุงููุดุงูู.

**ุงูุญู**:
```javascript
console.log('Creating PDF for hero:', heroName);
console.log('Story pages:', storyPages);
console.log(`Adding scene ${i + 1}:`, text);
console.log('Saving PDF as:', fileName);
```

## ๐ง ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### โ ุฅุฒุงูุฉ ุงูุฎุทูุท ุงูุนุฑุจูุฉ
- **ุงููุดููุฉ**: ุฎุทูุท ุนุฑุจูุฉ ุบูุฑ ูุฏุนููุฉ ูู jsPDF
- **ุงูุญู**: ุงุณุชุฎุฏุงู ุงูุฎุทูุท ุงูุงูุชุฑุงุถูุฉ ูุซู helvetica
- **ุงููุชูุฌุฉ**: ูุตูุต ูุงุถุญุฉ ูููุฑูุกุฉ

### โ ุฅุฒุงูุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ
- **ุงููุดููุฉ**: ุฑููุฒ ุชุนุจูุฑูุฉ ุชุณุจุจ ูุดุงูู ูู ุงูุชุฑููุฒ
- **ุงูุญู**: ุงุณุชุฎุฏุงู ูุตูุต ุจุณูุทุฉ ุจุฏูู ุฑููุฒ
- **ุงููุชูุฌุฉ**: ุชุฑููุฒ ุตุญูุญ ูููุตูุต

### โ ุฅุฒุงูุฉ ุงูุตูุฑ ูุคูุชุงู
- **ุงููุดููุฉ**: ุตูุฑ ูุง ุชุธูุฑ ูุชุณุจุจ ูุดุงูู
- **ุงูุญู**: ุงูุชุฑููุฒ ุนูู ุงููุตูุต ุฃููุงู
- **ุงููุชูุฌุฉ**: PDF ุจุณูุท ููุงุถุญ

### โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- **ุงููุดููุฉ**: ุฃุฎุทุงุก ุบูุฑ ูุงุถุญุฉ
- **ุงูุญู**: ุฅุถุงูุฉ console.log ูุชุชุจุน ุฃูุถู
- **ุงููุชูุฌุฉ**: ุณูููุฉ ูู ุงูุชุดุงู ูุญู ุงููุดุงูู

### โ ุชุญุณูู ุฏุงูุฉ toDataURL
- **ุงููุดููุฉ**: ูุดุงูู ูู ุชุญููู ุงูุตูุฑ
- **ุงูุญู**: ุชุญุณูู fetch ูุฅุถุงูุฉ headers
- **ุงููุชูุฌุฉ**: ูุนุงูุฌุฉ ุฃูุถู ููุตูุฑ

## ๐ ุงูููุฏ ุงููุญุฏุซ

### ุฏุงูุฉ PDF ุงููุจุณุทุฉ:
```javascript
async function downloadStoryAsPDF(storyPages, heroName) {
    if (!window.jspdf || !window.jspdf.jsPDF) {
        alert("ููุชุจุฉ jsPDF ูู ุชูุญููู ุจุดูู ุตุญูุญ. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ ุฃู ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช.");
        return;
    }
    
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
    
    console.log('Creating PDF for hero:', heroName);
    console.log('Story pages:', storyPages);
    
    // ุฅุถุงูุฉ ุตูุญุฉ ุงูุนููุงู
    pdf.setFillColor(102, 126, 234); // ููู ุงูุจููุณุฌู
    pdf.rect(0, 0, 210, 297, 'F');
    
    pdf.setTextColor(255, 255, 255);
    pdf.setFontSize(24);
    pdf.text('ูุตุฉ ุชูุงุนููุฉ', 105, 80, { align: 'center' });
    
    pdf.setFontSize(18);
    pdf.text(`ุงูุจุทู: ${heroName}`, 105, 100, { align: 'center' });
    
    pdf.setFontSize(14);
    pdf.text('ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุชุทุจูู ุงููุตุต ุงูุชูุงุนููุฉ', 105, 120, { align: 'center' });
    
    pdf.addPage();
    
    // ุฅุถุงูุฉ ูุญุชูู ุงููุตุฉ (ุจุฏูู ุตูุฑ ูุคูุชุงู)
    for (let i = 0; i < storyPages.length; i++) {
        const { text, imageUrl } = storyPages[i];
        
        console.log(`Adding scene ${i + 1}:`, text);
        
        // ุฅุถุงูุฉ ุนููุงู ุงููุดูุฏ
        pdf.setFillColor(147, 51, 234); // ููู ุงูุจููุณุฌู ุงููุงุชุญ
        pdf.rect(0, 0, 210, 20, 'F');
        
        pdf.setTextColor(255, 255, 255);
        pdf.setFontSize(16);
        pdf.text(`ุงููุดูุฏ ${i + 1}`, 105, 12, { align: 'center' });
        
        // ุฅุถุงูุฉ ุงููุต ููุท (ุจุฏูู ุตูุฑ ูุคูุชุงู)
        pdf.setTextColor(0, 0, 0);
        pdf.setFontSize(14);
        pdf.text(text, 15, 50, { maxWidth: 180, align: 'right' });
        
        // ุฅุถุงูุฉ ุฑูู ุงูุตูุญุฉ
        pdf.setFontSize(10);
        pdf.setTextColor(128, 128, 128);
        pdf.text(`${i + 1}`, 105, 280, { align: 'center' });
        
        // ุฅุถุงูุฉ ุตูุญุฉ ุฌุฏูุฏุฉ ุฅูุง ูู ุขุฎุฑ ุตูุญุฉ
        if (i < storyPages.length - 1) {
            pdf.addPage();
        }
    }
    
    // ุฅุถุงูุฉ ุตูุญุฉ ุงูุฎุชุงู
    pdf.addPage();
    pdf.setFillColor(102, 126, 234);
    pdf.rect(0, 0, 210, 297, 'F');
    
    pdf.setTextColor(255, 255, 255);
    pdf.setFontSize(20);
    pdf.text('ุงูุชูุช ุงููุตุฉ!', 105, 120, { align: 'center' });
    
    pdf.setFontSize(14);
    pdf.text('ุดูุฑุงู ูู ุนูู ูุดุงุฑูุฉ ูุฐู ุงููุบุงูุฑุฉ ุงูุฑุงุฆุนุฉ', 105, 140, { align: 'center' });
    
    pdf.setFontSize(12);
    pdf.text('ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ ุชุทุจูู ุงููุตุต ุงูุชูุงุนููุฉ', 105, 160, { align: 'center' });
    
    // ุญูุธ ุงูููู
    const fileName = `${heroName || 'ูุตุฉ'}_${new Date().toLocaleDateString('ar-EG')}.pdf`;
    console.log('Saving PDF as:', fileName);
    pdf.save(fileName);
}
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงููุตูุต ุงูุนุฑุจูุฉ:
```javascript
// ุงูุชุญ test-pdf-fix.html
// ุงุถุบุท "ุงุฎุชุจุงุฑ ุงููุตูุต ุงูุนุฑุจูุฉ"
// ุชุญูู ูู ุฃู ุงููุตูุต ูุงุถุญุฉ
```

### 2. ุงุฎุชุจุงุฑ PDF ูุจุณุท:
```javascript
// ุงุถุบุท "ุงุฎุชุจุงุฑ ุฅูุดุงุก PDF ูุจุณุท"
// ุชุญูู ูู ุฃู PDF ูุญุชูู ุนูู ูุตูุต ุนุฑุจูุฉ ูุงุถุญุฉ
```

### 3. ุงุฎุชุจุงุฑ PDF ุนุฑุจู:
```javascript
// ุงุถุบุท "ุงุฎุชุจุงุฑ PDF ุนุฑุจู"
// ุชุญูู ูู ุฃู PDF ูุญุชูู ุนูู ูุญุชูู ุนุฑุจู ุตุญูุญ
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### โ ูุจู ุงูุฅุตูุงุญ:
- โ ุฑููุฒ ุบุฑูุจุฉ ุจุฏูุงู ูู ุงููุตูุต
- โ ุตูุฑ ูุง ุชุธูุฑ
- โ ุฎุทูุท ุนุฑุจูุฉ ุบูุฑ ูุฏุนููุฉ
- โ ุฑููุฒ ุชุนุจูุฑูุฉ ุชุณุจุจ ูุดุงูู
- โ ุชุฑููุฒ ุฎุงุทุฆ ูููุตูุต

### โ ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ูุตูุต ุนุฑุจูุฉ ูุงุถุญุฉ
- โ ุชุฑููุฒ ุนูู ุงููุตูุต ุฃููุงู
- โ ุฎุทูุท ุงูุชุฑุงุถูุฉ ูุฏุนููุฉ
- โ ุฅุฒุงูุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ
- โ ุชุฑููุฒ ุตุญูุญ ูููุตูุต

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ
- `test-pdf-fix.html` - ุงุฎุชุจุงุฑ ุชุตุญูุญ PDF
- `PDF_FIX_SUMMARY.md` - ูุฐุง ุงูููุฎุต

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ
- `main.js`: ุฅุฒุงูุฉ ุงูุฎุทูุท ุงูุนุฑุจูุฉ
- `main.js`: ุฅุฒุงูุฉ ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ
- `main.js`: ุฅุฒุงูุฉ ุงูุตูุฑ ูุคูุชุงู
- `main.js`: ุชุญุณูู ุฏุงูุฉ toDataURL
- `main.js`: ุฅุถุงูุฉ console.log ููุชุชุจุน

## ๐ก ุงููููุฒุงุช ุงูุฅุถุงููุฉ
- **ูุตูุต ูุงุถุญุฉ**: ูุตูุต ุนุฑุจูุฉ ููุฑูุกุฉ
- **PDF ุจุณูุท**: ุชุฑููุฒ ุนูู ุงููุญุชูู ุงูุฃุณุงุณู
- **ุชุชุจุน ุฃูุถู**: console.log ูุชุชุจุน ุงููุดุงูู
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก**: ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- **ุชุฌุฑุจุฉ ูุญุณูุฉ**: PDF ูุนูู ุจุดูู ุตุญูุญ 